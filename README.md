# ğŸ­ EmoVision

> é¢å‘å›¾åƒè¯†åˆ«ç ”ç©¶ä¸ML/DLè§†è§‰æ¨¡å‹è®­ç»ƒçš„å®éªŒæ¡†æ¶  
> å¯¼å…¥æ•°æ®ä¸æ¨¡å‹æ¶æ„ï¼Œä¸€é”®å¼€å§‹è®­ç»ƒ Â· è¯„ä¼° Â· å¯è§†åŒ– Â· è®°å½•  
> ç»Ÿä¸€é…ç½® Â· å¤šæ¨¡å‹å¯¹æ¯” Â· è‡ªåŠ¨å¯è§†åŒ–

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ§© **æ¨¡å—åŒ–æ¶æ„** â€” `models/`ã€`data/`ã€`training/`ã€`utils/`ï¼Œæ–¹ä¾¿æ›¿æ¢æ¨¡å‹ä¸ç»„ä»¶
- ğŸ“Š **å¤šæ¨¡å‹å¯¹æ¯”** â€” æ”¯æŒä¸€æ¬¡æ€§è®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¯¹æ¯”å›¾è¡¨
- âš™ï¸ **é›†ä¸­é…ç½®** â€” æ‰€æœ‰è¶…å‚æ•°ç”± `config.Config` ç®¡ç†ï¼Œæ”¯æŒå‘½ä»¤è¡Œå‚æ•°è¦†ç›–
- ğŸ’¾ **å®éªŒç•™ç—•** â€” è‡ªåŠ¨ä¿å­˜å¸¦æ—¶é—´æˆ³çš„å®éªŒç»“æœï¼ˆJSONï¼‰ä¸å¯è§†åŒ–å›¾è¡¨ï¼ˆPNGï¼‰
- ğŸ“‹ **å›¢é˜Ÿè§„èŒƒ** â€” `å¼€å‘è§„èŒƒ.md` çº¦æŸå‘½åã€åˆ†æ”¯ã€æ—¥å¿—ç­‰ä¹ æƒ¯ï¼Œé™ä½å¤šäººåä½œæˆæœ¬

---

## ğŸ“ ä»“åº“ç»“æ„
```
EmoVision/
â”œâ”€â”€ config.py              # Config æ•°æ®ç±»ï¼Œé›†ä¸­ç®¡ç†è¶…å‚æ•°
â”œâ”€â”€ models/                # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ base_model.py      # æ¨¡å‹åŸºç±»
â”‚   â””â”€â”€ simple_cnn.py      # ç¤ºä¾‹æ¨¡å‹
â”œâ”€â”€ data/                  # æ•°æ®å¤„ç†
â”‚   â”œâ”€â”€ dataloader.py      # æ•°æ®é›†åŠ è½½
â”‚   â””â”€â”€ transforms.py      # æ•°æ®å¢å¼ºç­–ç•¥
â”œâ”€â”€ training/              # è®­ç»ƒæ ¸å¿ƒ
â”‚   â””â”€â”€ trainer.py         # è®­ç»ƒå¾ªç¯å°è£…
â”œâ”€â”€ utils/                 # å·¥å…·åº“
â”‚   â””â”€â”€ visualization.py   # ç»“æœå¯è§†åŒ–ç»˜åˆ¶
â”œâ”€â”€ experiments/           # å®éªŒäº§ç‰©
â””â”€â”€ main.py                # ä¸»ç¨‹åº
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹é€Ÿå¼€å§‹

### 1ï¸âƒ£ ç¯å¢ƒå‡†å¤‡
```bash
pip install -r requirements.txt
```

### 2ï¸âƒ£ æ•°æ®æ ¼å¼ä¸æ”¾ç½®
- é»˜è®¤æ”¯æŒ **EmotionROI** æ•°æ®é›†ã€‚
- è¯·å°†æ•°æ®è§£å‹è‡³ `data/data_name/`ï¼Œç»“æ„å¦‚ä¸‹ï¼š
  - `images/` (åŒ…å«ä¸åŒç±»åˆ«çš„å›¾ç‰‡)
  - `training.txt` ï¼ˆæ¯å¼ å›¾ç‰‡çš„è·¯å¾„ã€æ ‡ç­¾ä¿¡æ¯, eg. `anger/234.jpg`ï¼‰
  - `testing.txt` ï¼ˆæ¯å¼ å›¾ç‰‡çš„è·¯å¾„ã€æ ‡ç­¾ä¿¡æ¯, eg. `anger/234.jpg`ï¼‰


## 3ï¸âƒ£ æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹

### 1. å®šä¹‰æ¨¡å‹ç±»
åœ¨ `models/` ä¸‹æ–°å»ºæ–‡ä»¶ï¼ˆä¾‹å¦‚ `my_new_model.py`ï¼‰ï¼Œç»§æ‰¿ `BaseModel` å¹¶å®ç° `setup_model` æ–¹æ³•ï¼š

```python
from .base_model import BaseModel
import torch.nn as nn

class MyNewModel(BaseModel):
    def setup_model(self):
        # ä½¿ç”¨ self.config è®¿é—®é…ç½®
        self.net = nn.Sequential(
            nn.Linear(self.config.input_size, 128),
            nn.ReLU(),
            nn.Linear(128, self.config.num_classes)
        )
        # âš ï¸ å¿…é¡»å°†æ ¸å¿ƒç½‘ç»œèµ‹å€¼ç»™ self.modelï¼ŒTrainer ä¼šè‡ªåŠ¨å°†å…¶ç§»è‡³ GPU
        self.model = self.net
```

### 2. æ³¨å†Œæ¨¡å‹
æ‰“å¼€ `main.py`ï¼Œå¯¼å…¥ä½ çš„æ–°æ¨¡å‹ç±»å¹¶åŠ å…¥ `MODEL_ZOO` å­—å…¸ï¼š

```python
# main.py
from models.my_new_model import MyNewModel  # <--- å¯¼å…¥

MODEL_ZOO = {
    "SimpleCNN": SimpleCNN,
    "MyNewModel": MyNewModel,  # <--- æ³¨å†Œ
}
```

### 3. è¿è¡Œ
```bash
python main.py --models MyNewModel
```

## 4ï¸âƒ£ è¿è¡Œè®­ç»ƒ
**åŸºç¡€è¿è¡Œï¼ˆé»˜è®¤ SimpleCNNï¼‰ï¼š**
```bash
python main.py
```

**é«˜çº§ç”¨æ³•ï¼ˆå¤šæ¨¡å‹å¯¹æ¯” + å‚æ•°è¦†ç›–ï¼‰ï¼š**
```bash
# è¿è¡ŒæŒ‡å®šæ¨¡å‹ï¼Œä¿®æ”¹ epoch å’Œ batch sizeï¼ŒæŒ‡å®šå®éªŒå
python main.py --models SimpleCNN --epochs 20 --batch_size 16 --exp_name my_test
```

> ğŸ’¡ **æ”¯æŒå‚æ•°**ï¼š`--models` (åˆ—è¡¨), `--epochs`, `--batch_size`, `--lr`, `--exp_name`

---

## ğŸ“ˆ è®­ç»ƒæµç¨‹çº¦å®š
1. åœ¨ `training/trainer.py` ä¸­å®ç°æ ‡å‡†åŒ–è®­ç»ƒå¾ªç¯ã€‚
2. æ‰€æœ‰è¯„ä¼°æŒ‡æ ‡å†™åœ¨ `training/metrics.py`ï¼Œå¹¶é™„ç®€çŸ­ç”¨æ³•æ³¨é‡Šã€‚
3. å¯é€‰å›è°ƒï¼ˆæ—©åœã€æ—¥å¿—æ¨é€ç­‰ï¼‰ç»Ÿä¸€æ”¾å…¥ `training/callbacks.py`

---

## ğŸ“ å®éªŒè®°å½•éªŒè®°å½•

- ğŸ“„ **æ•°æ®è®°å½•** â€” è®­ç»ƒç»“æŸåï¼Œä¼šåœ¨ `experiments/training_history` ä¸‹ç”Ÿæˆ `{exp_name}_{timestamp}.json`ï¼ŒåŒ…å«æ‰€æœ‰è¿è¡Œæ¨¡å‹çš„è¶…å‚ã€Loss/Acc å†å²ä¸æœ€ç»ˆç»“æœ
- ğŸ“Š **å¯è§†åŒ–** â€” åœ¨ `experiments/charts/` ä¸‹ç”Ÿæˆå¯¹æ¯”å›¾è¡¨ï¼ˆLoss æ›²çº¿ã€Accuracy æ›²çº¿ã€æ··æ·†çŸ©é˜µï¼‰ï¼Œæ–¹ä¾¿ç›´è§‚è¯„ä¼°
- ğŸ’¾ **æ¨¡å‹ä¿å­˜** â€” åœ¨ `experiments/trained_models/`ä¸‹ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡ï¼Œä¾¿äºåç»­åŠ è½½ä¸æ¨ç†
- âœï¸ **æ‰‹åŠ¨è®°å½•** â€” æ¨èé…åˆ Markdown æ–‡æ¡£è®°å½•å®éªŒç»“è®ºï¼Œå¼•ç”¨è‡ªåŠ¨ç”Ÿæˆçš„å›¾è¡¨

